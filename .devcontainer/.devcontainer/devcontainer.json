{
  // 这个名字随便起，Codespace 界面里显示用
  "name": "Alist Codespace",
  
  // 基础镜像，用微软官方 Ubuntu 环境
  "image": "mcr.microsoft.com/vscode/devcontainers/base:ubuntu",

  // 第一次创建 Codespace 时执行：下载安装 alist 并解压
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y curl tar && curl -L https://github.com/alist-org/alist/releases/latest/download/alist-linux-amd64.tar.gz -o alist.tar.gz && tar -xzf alist.tar.gz && chmod +x alist",

  // 每次容器启动时执行：后台运行 alist + 保存日志
  "postStartCommand": "nohup ./alist server --data ./data > alist.log 2>&1 &",

  // 自动暴露 5244 端口给 Codespaces（后台会自动出现在 Ports 面板）
  "forwardPorts": [5244],

  // 让 Codespaces 在端口可用时直接弹出浏览器
  "portsAttributes": {
    "5244": {
      "label": "Alist Web",
      "onAutoForward": "openBrowser"
    }
  }
}